# docvars

![docvars logo](./logo.jpeg)

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã® `{{variables}}` ã‚’ YAML ãƒ•ã‚¡ã‚¤ãƒ«ã®å€¤ã§ç½®æ›ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

Markdownã€HTMLã€TXT ãªã©ã€ã‚ã‚‰ã‚†ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

## ä½¿ã„æ–¹

```bash
npx docvars <input> <output> [options]
```

### å¼•æ•°

| å¼•æ•°     | èª¬æ˜                               |
| -------- | ---------------------------------- |
| `input`  | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€å…¥åŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |
| `output` | å‡¦ç†æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª       |

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³      | çŸ­ç¸®å½¢ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ       | èª¬æ˜                                           |
| --------------- | ------ | ---------------- | ---------------------------------------------- |
| `--vars`        | `-v`   | `variables.yaml` | å¤‰æ•° YAML ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹                       |
| `--only`        | `-o`   | `**/*`           | ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚£ãƒ«ã‚¿ã™ã‚‹ glob ãƒ‘ã‚¿ãƒ¼ãƒ³           |
| `--exclude`     | `-e`   | -                | é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã® glob ãƒ‘ã‚¿ãƒ¼ãƒ³               |
| `--watch`       | `-w`   | `false`          | ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–ã—ã¦è‡ªå‹•ã§å†ãƒ“ãƒ«ãƒ‰           |
| `--rename-from` | `-F`   | -                | ãƒªãƒãƒ¼ãƒ å…ƒã®å¤‰æ•°å (--rename-to ã¨ä½µç”¨)        |
| `--rename-to`   | `-T`   | -                | ãƒªãƒãƒ¼ãƒ å…ˆã®å¤‰æ•°å (--rename-from ã¨ä½µç”¨)      |
| `--list-vars`   | `-l`   | `false`          | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å…¨å¤‰æ•°ã‚’ä¸€è¦§è¡¨ç¤º   |
| `--dry-run`     | `-d`   | `false`          | ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¾ãšã«å¤‰æ›´ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼         |

## ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
npx docvars ./templates ./output
```

### ã‚«ã‚¹ã‚¿ãƒ å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«

```bash
npx docvars ./templates ./output --vars production.yaml
```

### ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```bash
# Markdown ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å‡¦ç†
npx docvars ./templates ./output --only "**/*.md"

# è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã‚’å‡¦ç†
npx docvars ./templates ./output --only "**/*.{md,html,txt}"

# ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¸€è‡´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å‡¦ç†
npx docvars ./templates ./output --only "api-*.md"

# ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¸€è‡´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–
npx docvars ./templates ./output --exclude "draft-*.md"
```

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å…¨ã¦ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡¦ç†ã•ã‚Œã¾ã™ï¼ˆç”»åƒãªã©ã®ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«é™¤å¤–ã•ã‚Œã¾ã™ï¼‰ã€‚

### ç›£è¦–ãƒ¢ãƒ¼ãƒ‰

```bash
npx docvars ./templates ./output --watch
```

å‡ºåŠ›:

```
ğŸ‘ Watch mode enabled

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Templates â”‚ /path/to/templates      â”‚
â”‚ Variables â”‚ /path/to/variables.yaml â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Waiting for changes... (Ctrl+C to stop)

ğŸ‘€ Change detected: README.md (change)

âœ¨ Build complete

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File      â”‚ Status â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ README.md â”‚ âœ“ done â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Processed: 1 file(s)
```

### å¤‰æ•°ã®ãƒªãƒãƒ¼ãƒ 

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨å¤‰æ•° YAML ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã§å¤‰æ•°åã‚’ãƒªãƒãƒ¼ãƒ ã—ã¾ã™:

```bash
# å˜ç´”ãªãƒªãƒãƒ¼ãƒ 
npx docvars ./templates ./output --rename-from "name" --rename-to "title"

# ãƒã‚¹ãƒˆã—ãŸå¤‰æ•°ã®ãƒªãƒãƒ¼ãƒ 
npx docvars ./templates ./output --rename-from "database.host" --rename-to "db.host"

# ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒªãƒãƒ¼ãƒ  - ä¸€è‡´ã™ã‚‹ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æŒã¤å…¨ã¦ã®å¤‰æ•°ã‚’ãƒªãƒãƒ¼ãƒ 
# {{database}} â†’ {{db}}
# {{database.host}} â†’ {{db.host}}
# {{database.port}} â†’ {{db.port}}
npx docvars ./templates ./output --rename-from "database" --rename-to "db"
```

å‡ºåŠ›:

```
âœï¸  Rename complete
   database â†’ db

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File           â”‚ Status    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ variables.yaml â”‚ âœ“ updated â”‚
â”‚ README.md      â”‚ âœ“ updated â”‚
â”‚ config.md      â”‚ âœ“ updated â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Updated: 3 file(s)
```

### å¤‰æ•°ã®ä¸€è¦§è¡¨ç¤º

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å…¨ã¦ã®å¤‰æ•°ã¨ãã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã¾ã™:

```bash
npx docvars ./templates ./output --list-vars
```

å‡ºåŠ›:

```
ğŸ“‹ Variables

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Variable         â”‚ Value            â”‚ Used in   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ app.name         â”‚ MyApp            â”‚ README.md â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ api.endpoint     â”‚ https://api.eâ€¦   â”‚ config.md â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³

å®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¾ãšã«ã€ä½œæˆãƒ»æ›´æ–°ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¾ã™:

```bash
npx docvars ./templates ./output --dry-run
```

å‡ºåŠ›:

```
ğŸ” Dry run - no files written

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File         â”‚ Status      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ config.md    â”‚ + create    â”‚
â”‚ README.md    â”‚ ~ update    â”‚
â”‚ api.md       â”‚ ~ update    â”‚
â”‚ changelog.md â”‚ = unchanged â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Summary: 1 create Â· 2 update Â· 1 unchanged
```

## ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æ–‡

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ `{{variableName}}` æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™:

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (templates/hello.md):**
```markdown
# Hello {{name}}

Welcome to {{project}}!
```

**å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ« (variables.yaml):**
```yaml
name: World
project: My Project
```

**å‡ºåŠ› (output/hello.md):**
```markdown
# Hello World

Welcome to My Project!
```

### ãƒã‚¹ãƒˆã—ãŸå¤‰æ•°

å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ã€ãƒ‰ãƒƒãƒˆè¨˜æ³•ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:**
```markdown
# {{app.name}}

Database: {{database.host}}:{{database.port}}
```

**å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ« (variables.yaml):**
```yaml
app:
  name: My App

database:
  host: localhost
  port: 5432
```

**å‡ºåŠ›:**
```markdown
# My App

Database: localhost:5432
```

### é…åˆ—å¤‰æ•°

å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§é…åˆ—ã‚’ä½¿ç”¨ã—ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨˜æ³•ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:**
```markdown
## Features

1. {{features.0}}
2. {{features.1}}
3. {{features.2}}
```

**å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ« (variables.yaml):**
```yaml
features:
  - User authentication
  - Data analytics
  - API integration
```

**å‡ºåŠ›:**
```markdown
## Features

1. User authentication
2. Data analytics
3. API integration
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

| ã‚±ãƒ¼ã‚¹                     | å‹•ä½œ                                           |
| -------------------------- | ---------------------------------------------- |
| æœªå®šç¾©ã®å¤‰æ•°               | è­¦å‘Šã‚’è¡¨ç¤ºã—ã€å¤‰æ•°æ§‹æ–‡ã¯ãã®ã¾ã¾ç¶­æŒ           |
| å…¥åŠ›ã¨å‡ºåŠ›ãŒåŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | ã‚¨ãƒ©ãƒ¼ã§çµ‚äº†                                   |
| å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ | ã‚¨ãƒ©ãƒ¼ã§çµ‚äº†                                   |

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
